---
---

<section id="features" class="features">
  <div class="container">
    <div class="features-header-wrapper">
      <div class="section-header">
        <span class="section-badge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
          BubbleStone.AI
        </span>
        <h2>Tout ce dont vous avez besoin</h2>
        <p>Libérer votre temps, votre créativité et laisser l'IA se charger de votre production.</p>
      </div>
    </div>

    <div class="bento-grid">
      <!-- Large Feature Card -->
      <div class="bento-item bento-large">
        <div class="bento-content">
          <div class="bento-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/>
            </svg>
          </div>
          <h3>Pilotage IT 360°</h3>
          <p>Déploiement, monitoring, support, réduction des coûts, optimisation des ressources, sécurisation, l'IA au cœur de votre infrastructure.</p>
        </div>
        <div class="bento-visual">
          <div class="dashboard-preview">
            <div class="dash-header">
              <span>Dashboard</span>
              <div class="dash-dots">
                <span></span><span></span><span></span>
              </div>
            </div>
            <div class="dash-content">
              <div class="dash-stat">
                <span class="dash-label">CPU</span>
                <div class="dash-bar"><div class="dash-fill" style="width: 45%"></div></div>
                <span class="dash-value">45%</span>
              </div>
              <div class="dash-stat">
                <span class="dash-label">RAM</span>
                <div class="dash-bar"><div class="dash-fill" style="width: 72%"></div></div>
                <span class="dash-value">72%</span>
              </div>
              <div class="dash-stat">
                <span class="dash-label">Disk</span>
                <div class="dash-bar"><div class="dash-fill" style="width: 58%"></div></div>
                <span class="dash-value">58%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Medium Feature Card -->
      <div class="bento-item bento-medium">
        <div class="bento-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
          </svg>
        </div>
        <h3>Tout automatiser</h3>
        <p>Produire plus, plus vite, tout le temps, sans plus d'effort. Tout est aujourd'hui devenu possible.</p>
        <div class="security-badges">
          <span class="badge">No-Code</span>
          <span class="badge">IA</span>
          <span class="badge">24/7</span>
        </div>
      </div>

      <!-- Small Feature Cards -->
      <div class="bento-item bento-small">
        <div class="bento-icon icon-purple">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
            <line x1="12" y1="22.08" x2="12" y2="12"/>
          </svg>
        </div>
        <h3>Data management</h3>
        <p>Valoriser ce que votre entreprise a de plus précieux, son savoir.</p>
      </div>

      <div class="bento-item bento-small">
        <div class="bento-icon icon-green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
        </div>
        <h3>Processus métier</h3>
        <p>Augmenter la qualité, la vitesse et la précision du travail de vos collaborateurs.</p>
      </div>

      <!-- Code Preview Card - Claude Code Animation -->
      <div class="bento-item bento-code" id="claude-terminal">
        <div class="code-header">
          <div class="code-dots">
            <span></span><span></span><span></span>
          </div>
          <span class="terminal-title">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="M2 17l10 5 10-5"/>
              <path d="M2 12l10 5 10-5"/>
            </svg>
            Claude Code
          </span>
        </div>
        <div class="code-content terminal-content">
          <div class="terminal-line prompt-line">
            <span class="prompt">❯</span>
            <span class="typed-command" id="typed-command"></span>
            <span class="cursor" id="cursor">▋</span>
          </div>
          <div class="terminal-output" id="terminal-output"></div>
        </div>
        <div class="bento-icon-float">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="16 18 22 12 16 6"/>
            <polyline points="8 6 2 12 8 18"/>
          </svg>
        </div>
        <h3>Automatisation Intelligente</h3>
        <p>Workflows n8n pour automatiser vos processus métier.</p>
      </div>

      <!-- AI Feature Card -->
      <div class="bento-item bento-ai">
        <div class="ai-animation">
          <div class="ai-circle"></div>
          <div class="ai-circle"></div>
          <div class="ai-circle"></div>
        </div>
        <div class="bento-content">
          <div class="bento-icon icon-gradient">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2a4 4 0 0 1 4 4v1a4 4 0 0 1-8 0V6a4 4 0 0 1 4-4z"/>
              <path d="M12 14a7 7 0 0 1 7 7H5a7 7 0 0 1 7-7z"/>
              <circle cx="12" cy="9" r="2"/>
            </svg>
          </div>
          <h3>IA & Machine Learning</h3>
          <p>Intégration OpenAI et modèles personnalisés pour des insights automatiques et des prédictions intelligentes.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .features {
    padding: var(--spacing-3xl) 0;
    position: relative;
  }

  .features-header-wrapper {
    position: relative;
    max-width: 700px;
    margin: 0 auto var(--spacing-xl) auto;
    padding: var(--spacing-xl);
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-xl);
    overflow: hidden;
    z-index: 100;
    transition: border-color 0.5s ease, box-shadow 0.5s ease;
  }

  .features-header-wrapper.line-reached {
    border-color: rgba(59, 130, 246, 0.5);
    box-shadow:
      0 0 20px rgba(59, 130, 246, 0.3),
      0 0 40px rgba(59, 130, 246, 0.15),
      0 0 60px rgba(59, 130, 246, 0.05);
  }

  .features-header-wrapper .section-header {
    margin-bottom: 0;
    text-align: center;
  }

  .bento-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    grid-template-rows: auto;
    gap: 1.5rem;
    position: relative;
  }

  .bento-item {
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-xl);
    padding: var(--spacing-lg);
    transition: all var(--transition-slow);
    position: relative;
    overflow: hidden;
    z-index: 1;
  }

  .bento-item:hover {
    border-color: rgba(59, 130, 246, 0.5);
    box-shadow:
      0 0 20px rgba(59, 130, 246, 0.3),
      0 0 40px rgba(59, 130, 246, 0.15),
      0 0 60px rgba(59, 130, 246, 0.05);
  }

  .bento-item h3 {
    font-size: 1.25rem;
    margin: 1rem 0 0.5rem;
    color: var(--color-primary);
  }

  .bento-item p {
    font-size: 0.9375rem;
    color: var(--color-gray-600);
    line-height: 1.6;
  }

  /* Icon Styles */
  .bento-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(59, 130, 246, 0.1);
    border-radius: var(--radius-md);
    color: var(--color-accent);
  }

  .bento-icon.icon-purple {
    background: rgba(139, 92, 246, 0.1);
    color: #8b5cf6;
  }

  .bento-icon.icon-green {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
  }

  .bento-icon.icon-gradient {
    background: var(--gradient-primary);
    color: white;
  }

  /* Grid Placement */
  .bento-large {
    grid-column: span 7;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-lg);
    align-items: center;
  }

  .bento-medium {
    grid-column: span 5;
  }

  .bento-small {
    grid-column: span 3;
  }

  .bento-code {
    grid-column: span 6;
  }

  .bento-ai {
    grid-column: span 6;
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
  }

  /* Dashboard Preview */
  .dashboard-preview {
    background: var(--color-gray-50);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
  }

  .dash-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: white;
    border-bottom: 1px solid var(--color-gray-200);
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--color-gray-600);
  }

  .dash-dots {
    display: flex;
    gap: 4px;
  }

  .dash-dots span {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-gray-300);
  }

  .dash-content {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .dash-stat {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .dash-label {
    width: 40px;
    font-size: 0.75rem;
    color: var(--color-gray-500);
    font-weight: 500;
  }

  .dash-bar {
    flex: 1;
    height: 8px;
    background: var(--color-gray-200);
    border-radius: 4px;
    overflow: hidden;
  }

  .dash-fill {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: 4px;
    transition: width 1s ease;
  }

  .dash-value {
    width: 40px;
    font-size: 0.75rem;
    color: var(--color-primary);
    font-weight: 600;
    text-align: right;
  }

  /* Security Badges */
  .security-badges {
    display: flex;
    gap: 0.5rem;
    margin-top: 1rem;
    flex-wrap: wrap;
  }

  .badge {
    padding: 0.375rem 0.75rem;
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: var(--radius-full);
  }

  /* Code Block */
  .code-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--color-gray-800);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    margin: calc(var(--spacing-lg) * -1);
    margin-bottom: 1rem;
  }

  .code-dots {
    display: flex;
    gap: 4px;
  }

  .code-dots span {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  .code-dots span:first-child { background: #ef4444; }
  .code-dots span:nth-child(2) { background: #f59e0b; }
  .code-dots span:last-child { background: #22c55e; }

  .code-header span:last-child {
    font-size: 0.8125rem;
    color: var(--color-gray-400);
  }

  .code-content {
    background: var(--color-gray-900);
    border-radius: 0 0 var(--radius-md) var(--radius-md);
    padding: 1rem;
    margin-bottom: 1rem;
    overflow-x: auto;
  }

  .code-content pre {
    margin: 0;
    font-family: 'Fira Code', monospace;
    font-size: 0.8125rem;
    line-height: 1.6;
  }

  .code-comment { color: #6b7280; }
  .code-key { color: #60a5fa; }
  .code-string { color: #34d399; }

  /* Claude Code Terminal Styles */
  .terminal-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    color: var(--color-gray-300);
    font-weight: 500;
  }

  .terminal-title svg {
    color: #60a5fa;
  }

  .terminal-content {
    min-height: 180px;
    display: flex;
    flex-direction: column;
    font-family: 'Fira Code', 'SF Mono', monospace;
    font-size: 0.8125rem;
    line-height: 1.7;
  }

  .terminal-line {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .prompt {
    color: #22c55e;
    font-weight: 600;
  }

  .typed-command {
    color: #f59e0b;
  }

  .cursor {
    color: #60a5fa;
    animation: blink 1s step-end infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .terminal-output {
    margin-top: 0.75rem;
    color: var(--color-gray-300);
  }

  .output-line {
    opacity: 0;
    animation: fadeInLine 0.3s ease forwards;
  }

  .output-line.comment {
    color: #6b7280;
  }

  .output-line.success {
    color: #22c55e;
  }

  .output-line.key {
    color: #60a5fa;
  }

  .output-line.string {
    color: #34d399;
  }

  .output-line.info {
    color: #94a3b8;
    font-style: italic;
  }

  @keyframes fadeInLine {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .bento-icon-float {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gradient-primary);
    border-radius: var(--radius-md);
    color: white;
  }

  /* AI Animation */
  .ai-animation {
    position: relative;
    width: 100px;
    height: 100px;
    flex-shrink: 0;
  }

  .ai-circle {
    position: absolute;
    border-radius: 50%;
    border: 2px solid var(--color-accent);
    opacity: 0.3;
    animation: ai-pulse 3s ease-out infinite;
  }

  .ai-circle:nth-child(1) {
    inset: 0;
    animation-delay: 0s;
  }

  .ai-circle:nth-child(2) {
    inset: 15px;
    animation-delay: 0.5s;
  }

  .ai-circle:nth-child(3) {
    inset: 30px;
    animation-delay: 1s;
    background: var(--gradient-primary);
    border: none;
    opacity: 1;
  }

  @keyframes ai-pulse {
    0% { transform: scale(0.8); opacity: 0.8; }
    100% { transform: scale(1.2); opacity: 0; }
  }

  .ai-circle:nth-child(3) {
    animation: none;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .bento-large {
      grid-column: span 12;
    }

    .bento-medium {
      grid-column: span 12;
    }

    .bento-small {
      grid-column: span 6;
    }

    .bento-code,
    .bento-ai {
      grid-column: span 12;
    }
  }

  @media (max-width: 768px) {
    .bento-small {
      grid-column: span 12;
    }

    .bento-large {
      grid-template-columns: 1fr;
    }

    .bento-ai {
      flex-direction: column;
      text-align: center;
    }
  }
</style>

<script>
  // Claude Code Terminal Animation
  document.addEventListener('DOMContentLoaded', () => {
    const terminal = document.getElementById('claude-terminal');
    const typedCommand = document.getElementById('typed-command');
    const cursor = document.getElementById('cursor');
    const output = document.getElementById('terminal-output');

    if (!terminal || !typedCommand || !output) return;

    const command = '/workflow create backup-automation';
    const outputLines = [
      { text: '✓ Creating workflow...', class: 'success', delay: 400 },
      { text: '', class: '', delay: 200 },
      { text: '// backup-automation.n8n.json', class: 'comment', delay: 300 },
      { text: '"trigger": "schedule",', class: 'key', delay: 200 },
      { text: '"interval": "daily",', class: 'key', delay: 200 },
      { text: '"actions": [', class: 'key', delay: 150 },
      { text: '  "backup_data",', class: 'string', delay: 150 },
      { text: '  "send_report",', class: 'string', delay: 150 },
      { text: '  "notify_team"', class: 'string', delay: 150 },
      { text: ']', class: 'key', delay: 200 },
      { text: '', class: '', delay: 300 },
      { text: '✓ Workflow deployed successfully!', class: 'success', delay: 400 },
    ];

    let isAnimating = false;
    let hasAnimated = false;

    async function typeCommand(text: string, element: HTMLElement) {
      for (let i = 0; i <= text.length; i++) {
        element.textContent = text.slice(0, i);
        await new Promise(r => setTimeout(r, 50 + Math.random() * 30));
      }
    }

    async function showOutput() {
      let totalDelay = 0;
      for (const line of outputLines) {
        totalDelay += line.delay;
        setTimeout(() => {
          const div = document.createElement('div');
          div.className = `output-line ${line.class}`;
          div.textContent = line.text || '\u00A0';
          output.appendChild(div);
        }, totalDelay);
      }
    }

    async function runAnimation() {
      if (isAnimating) return;
      isAnimating = true;

      // Reset
      typedCommand.textContent = '';
      output.innerHTML = '';
      if (cursor) cursor.style.display = 'inline';

      // Type command
      await typeCommand(command, typedCommand);

      // Hide cursor after typing
      await new Promise(r => setTimeout(r, 300));
      if (cursor) cursor.style.display = 'none';

      // Show output
      await showOutput();

      isAnimating = false;
      hasAnimated = true;
    }

    // Run animation when element comes into view
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !hasAnimated) {
          setTimeout(runAnimation, 500);
        }
      });
    }, { threshold: 0.5 });

    observer.observe(terminal);

    // Replay on hover (after initial animation)
    terminal.addEventListener('mouseenter', () => {
      if (hasAnimated && !isAnimating) {
        hasAnimated = false;
        runAnimation();
      }
    });
  });
</script>
