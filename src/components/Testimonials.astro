---
interface Testimonial {
  quote: string;
  author: string;
  role: string;
  company: string;
  initial: string;
  color: string;
}

const testimonials: Testimonial[] = [
  {
    quote: "BubbleStone nous a permis d'automatiser 80% de nos processus IT. Un gain de temps et d'efficacité considérable.",
    author: "Marie D.",
    role: "DSI",
    company: "PME Industrielle",
    initial: "M",
    color: "#3b82f6"
  },
  {
    quote: "Leur expertise Microsoft 365 et Azure a transformé notre collaboration d'équipe. Migration réussie sans interruption.",
    author: "Thomas L.",
    role: "Directeur Technique",
    company: "Startup Tech",
    initial: "T",
    color: "#8b5cf6"
  },
  {
    quote: "L'audit de sécurité réalisé nous a permis d'obtenir notre certification ISO 27001. Accompagnement professionnel.",
    author: "Sophie R.",
    role: "RSSI",
    company: "Cabinet Conseil",
    initial: "S",
    color: "#10b981"
  },
  {
    quote: "Grâce à leurs workflows n8n, nous avons réduit nos tâches manuelles de 60%. ROI visible dès le premier mois.",
    author: "Pierre M.",
    role: "CEO",
    company: "E-commerce",
    initial: "P",
    color: "#f59e0b"
  },
  {
    quote: "Un partenaire de confiance pour notre transformation digitale. Réactifs et toujours force de proposition.",
    author: "Claire B.",
    role: "Responsable IT",
    company: "Association",
    initial: "C",
    color: "#ef4444"
  }
];
---

<section class="testimonials">
  <div class="container">
    <div class="section-header">
      <span class="section-badge">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
        Témoignages
      </span>
      <h2>Ce que disent nos clients</h2>
      <p>Découvrez comment nous accompagnons les entreprises dans leur transformation.</p>
    </div>

    <div class="testimonials-carousel">
      <div class="testimonials-track">
        {[...testimonials, ...testimonials].map((testimonial) => (
          <div class="testimonial-card">
            <div class="testimonial-quote">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor" opacity="0.1">
                <path d="M11.192 15.757c0-.88-.23-1.618-.69-2.217-.326-.412-.768-.683-1.327-.812-.55-.128-1.07-.137-1.54-.028-.16-.95.1-1.956.76-3.022.66-1.065 1.515-1.867 2.558-2.403L9.373 5c-.8.396-1.56.898-2.26 1.505-.71.607-1.34 1.305-1.9 2.094s-.98 1.68-1.25 2.69-.346 2.04-.217 3.1c.168 1.4.62 2.52 1.356 3.35.735.84 1.652 1.26 2.748 1.26.965 0 1.766-.29 2.4-.878.628-.576.94-1.365.94-2.368l.002.003zm9.124 0c0-.88-.23-1.618-.69-2.217-.326-.42-.77-.692-1.327-.817-.56-.124-1.074-.13-1.54-.022-.16-.94.09-1.95.75-3.02.66-1.06 1.514-1.86 2.557-2.4L18.49 5c-.8.396-1.555.898-2.26 1.505-.708.607-1.34 1.305-1.894 2.094-.556.79-.97 1.68-1.24 2.69-.273 1-.345 2.04-.217 3.1.168 1.4.62 2.52 1.356 3.35.735.84 1.652 1.26 2.748 1.26.965 0 1.766-.29 2.4-.878.628-.576.94-1.365.94-2.368l-.007.003z"/>
              </svg>
              <p>"{testimonial.quote}"</p>
            </div>
            <div class="testimonial-author">
              <div class="author-avatar" style={`background: linear-gradient(135deg, ${testimonial.color}, ${testimonial.color}dd)`}>
                {testimonial.initial}
              </div>
              <div class="author-info">
                <span class="author-name">{testimonial.author}</span>
                <span class="author-role">{testimonial.role} - {testimonial.company}</span>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <p class="testimonials-note">* Témoignages de clients réels (noms modifiés pour confidentialité)</p>
  </div>
</section>

<style>
  .testimonials {
    padding: var(--spacing-3xl) 0;
    background: var(--color-white);
    overflow: hidden;
  }

  .testimonials-carousel {
    margin-top: var(--spacing-xl);
    position: relative;
    width: 100%;
    overflow: hidden;
    mask-image: linear-gradient(90deg, transparent 0%, white 5%, white 95%, transparent 100%);
    -webkit-mask-image: linear-gradient(90deg, transparent 0%, white 5%, white 95%, transparent 100%);
  }

  .testimonials-track {
    display: flex;
    gap: 1.5rem;
    animation: scroll-testimonials 40s linear infinite;
    width: max-content;
    padding: 1.5rem 0;
  }

  .testimonials-track:hover {
    animation-play-state: paused;
  }

  @keyframes scroll-testimonials {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  .testimonial-card {
    flex-shrink: 0;
    width: 380px;
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: var(--radius-xl);
    padding: var(--spacing-lg);
    transition: all var(--transition-slow);
  }

  .testimonial-card:hover {
    border-color: rgba(59, 130, 246, 0.5);
    box-shadow:
      0 0 20px rgba(59, 130, 246, 0.3),
      0 0 40px rgba(59, 130, 246, 0.15),
      0 0 60px rgba(59, 130, 246, 0.05);
  }

  .testimonial-quote {
    position: relative;
    margin-bottom: var(--spacing-md);
  }

  .testimonial-quote svg {
    position: absolute;
    top: -8px;
    left: -8px;
    color: var(--color-accent);
  }

  .testimonial-quote p {
    font-size: 0.9375rem;
    line-height: 1.7;
    color: var(--color-gray-700);
    padding-left: 1rem;
  }

  .testimonial-author {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--color-gray-100);
  }

  .author-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: 600;
    color: white;
    flex-shrink: 0;
  }

  .author-info {
    display: flex;
    flex-direction: column;
  }

  .author-name {
    font-weight: 600;
    color: var(--color-primary);
    font-size: 0.9375rem;
  }

  .author-role {
    font-size: 0.8125rem;
    color: var(--color-gray-500);
  }

  .testimonials-note {
    text-align: center;
    margin-top: var(--spacing-lg);
    font-size: 0.8125rem;
    color: var(--color-gray-400);
    font-style: italic;
  }

  @media (max-width: 768px) {
    .testimonial-card {
      width: 320px;
    }
  }
</style>
